//SCHEDMNG JOB 0,'HLASM JOB SCHEDULER',
//         MSGCLASS=A,MSGLEVEL=(1,1),
//         NOTIFY=&SYSUID
//ASMCLG EXEC PROC=ASMHCLG
//SYSIN  DD *
         PRINT ON,NODATA,NOGEN

*        MANAGES AND EDITS THE SCHEDREC, ADDS NEW JOBS/DATA
*        FUNCTIONALITY:
*              ADD JOB TO SCHEDREC
*              REMOVE JOB FROM SCHEDREC
*              EDIT JOB SCHEDULE PARAMETERS IN SCHEDREC SUCH AS:
*              TIME, DEPENDENCIES
*              PROCESS COMMANDS, EX. 'C JOB123' TO CANCEL JOB 'JOB123'

********************************************
*        REGISTER EQUATES                  *
********************************************
R0       EQU   0
R1       EQU   1
R2       EQU   2
R3       EQU   3
R4       EQU   4
R5       EQU   5
R6       EQU   6
R7       EQU   7
R8       EQU   8
R9       EQU   9
R10      EQU   10
R11      EQU   11
R12      EQU   12
R13      EQU   13
R14      EQU   14
R15      EQU   15
********************************************
SCHEDMNG CSECT
         STM   R14,R12,12(R13)
         BASR  R12,0                ESTABLISH
         USING *,R12                ADDRESSABILITY
         ST    R13,SAVEAREA+4       BACKWARD CHAIN CALLER
         LA    R13,SAVEAREA         ADDRESS OF SAVE AREA
********************************************
*        MAIN PROGRAM LOGIC                *
********************************************
         OPEN  (FILEOUT,(EXTEND))

         MVC   JOBNAME,=CL80' '
         MVC   JOBCMD(3),=C'ADD'
         MVC   JOBNAME(21),=C'Z00620.ADVASM(DAY1P2)'
         MVC   JOBTIME,=C'1600'


         CLC   =C'ADD',JOBCMD
         BE    CMDADD


CLOSEFILE EQU  *
         CLOSE (FILEOUT)

         L     R13,SAVEAREA+4       POINT AT OLD SAVE AREA
         LM    R14,R12,12(R13)      RESTORE THE REGISTERS
         LA    R15,0                RETURN CODE = 0
         BR    R14                  RETURN TO THE OPERATING SYSTEM
********************************************
*        SYMBOL DECLARATIONS               *
********************************************

********************************************
*        JOB COMMAND INPUT                 *
********************************************
JOBCMD   DS    CL10
JOBNAME  DS    CL44
JOBTIME  DS    CL4

********************************************
*        JOB COMMANDS                      *
********************************************
CMDADD   EQU   *
         MVC   OUTREC,=CL80' '
         MVC   OUTREC(8),=C'JOBNAME:'
         MVC   OUTREC+8(44),JOBNAME
         MVC   OUTREC+53(8),=C'JOBTIME:'
         MVC   OUTREC+61(L'JOBTIME),JOBTIME
         PUT   FILEOUT,OUTREC
         B     CLOSEFILE

********************************************
*        OUTPUT FILE - DATA CONTROL BLOCK  *
********************************************
FILEOUT  DCB   DSORG=PS,                                               X
               MACRF=(PM),                                             X
               DDNAME=FILEOUT,                                         X
               RECFM=FB,                                               X
               LRECL=80
********************************************
*        OUTPUT RECORD AREA                *
********************************************
OUTREC   DS    CL80

********************************************
*        REGISTER SAVE AREA                *
********************************************
SAVEAREA DS    18F

********************************************
*        LITERAL POOL                      *
********************************************
         LTORG *

********************************************
*        END OF PROGRAM                    *
********************************************
         END   SCHEDMNG
/*
//G.SYSUDUMP   DD SYSOUT=*
//G.FILEOUT    DD DSN=Z00620.SCHEDREC,DISP=SHR
